<!--
https://data.gov.tw/dataset/101813
臺南市噪音監測站監測數據
本資料集提供臺南市噪音監測站監測數據資料。
-->
<!DOCTYPE html>
<html>

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    $(document).ready(function () {
      $("#button1").click(function () {
        let url1 = "https://soa.tainan.gov.tw/Api/Service/Get/c907df5c-d78b-4aa1-b5d4-f44fa712ab8e";
        // 打開 demo_test.txt 把內容 #div1
        $.get(url1, function (data, status) {
          //測試抓回來的data
          // console.log(data);
          // let count3 = data.data[1].測站編號;
          let count4 = data.data[1];
          // console.log(count4);
          //show 所有值 去算長度多少!?
          for (let key in count4) {
            let valuel = count4[key];
            console.log(valuel);
          }

          //把資料存進去table
          for (let i = 0; i < data.data.length; i++) {

            let html1 =
              `<tr> 
                  <td>`+ data.data[i].Seq + `</td>
                  <td>`+ data.data[i].測站編號 + `</td> 
                  <td>`+ data.data[i].監測日期 + `</td> 
                  <td>`+ data.data[i].測站名稱 + `</td> 
                  <td>`+ data.data[i].音源別 + `</td> 
                  <td>`+ data.data[i].管制區 + `</td> 
                  <td>`+ data.data[i].日 + `</td> 
                  <td>`+ data.data[i].晚 + `</td> 
                  <td>`+ data.data[i].夜 + `</td> 
                  <td>`+ data.data[i].早晚標準值 + `</td> 
                  <td>`+ data.data[i].日間標準值 + `</td> 
                  <td>`+ data.data[i].夜間標準值 + `</td> 
                  <td><button type="button" class="btn btn-danger del"> 刪除</button></td> 
               </tr> `;
            //設定id 把html1的格式放進去新增
            $("#tbody1").append(html1);
          }
        });
      });

      $("#button3").click(function () {          // #button1 按下後 的反應 
        let url1 = "https://data.taipei/api/v1/dataset/1c6a89c1-1b2a-4748-af8c-f3875f06980c?scope=resourceAquire";
        let url2 = "https://cors-anywhere.herokuapp.com/" + url1;

        // 打開 demo_test.txt 把內容 #div1
        $.get(url2, function (data, status) {
          console.log("Data: " + data + "\nStatus: " + status);
          let str1 = JSON.stringify(data);
          $("#div1").text(str1);
        });
      });

    });
  </script>
</head>

<body>
  <h1> 臺南市噪音監測站監測數據</h1>

  <a href="https://data.gov.tw/dataset/101813">
    臺南市噪音監測站監測數據(113年第4季)</a>


  <button id="button1"> 資料下載</button>


  <table id="tbody1" class="table table-striped">
    <thead>
      <tr>
        <th>Seq</th>
        <th>測站編號</th>
        <th>監測日期</th>
        <th>測站名稱</th>
        <th>音源別</th>
        <th>管制區</th>
        <th>日</th>
        <th>晚</th>
        <th>夜</th>
        <th>早晚標準值</th>
        <th>日間標準值</th>
        <th>夜間標準值</th>
      </tr>
    </thead>
  </table>

</body>

</html>